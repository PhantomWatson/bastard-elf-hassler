<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>Bastard Elf Hassler</title>
  <meta name="description" content="A dice-roller for combat and other such hassles in the game The Sword of the Bastard Elf.">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

  <meta property="og:title" content="Bastard Elf Hassler" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://bastard-elf-hassler.phantomwatson.com" />
  <meta property="og:description" content="A dice-roller for combat and other such hassles in the game The Sword of the Bastard Elf." />
  <meta property="og:image" content="/img/coverimg.jpg" />

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous" />
  <link rel="stylesheet" href="css/normalize.css" />
  <link rel="stylesheet" href="css/main.css" />
  <link rel="stylesheet" href="fontawesome-5.14.0/css/all.min.css" />
  <link rel="shortcut icon" href="favicon.ico" />

  <meta name="theme-color" content="#fafafa" />
</head>

<body>
  <nav class="navbar fixed-top navbar-light bg-light">
    <span class="navbar-brand">
      Bastard Elf Hassler
    </span>
    <span id="round-header">
      Round 1
    </span>
  </nav>
  <div class="container">
    <form id="form">
      <div class="row">
        <section class="card col-md-6">
          <div class="card-body">
            <h2 class="card-title">
              The Bastard Elf
            </h2>
            <div class="form-group form-check">
              <input class="form-check-input" type="checkbox" value="1" id="rather-win" checked="checked" />
              <label class="form-check-label" for="rather-win">
                I'm trying to win this fight
              </label>
            </div>
            <div class="row">
              <div class="form-group col-4">
                <label for="total-effort">
                  Effort
                </label>
                <input type="number" class="form-control" id="total-effort" min="0" value="70" />
              </div>
              <div class="form-group col-4">
                <label for="total-elan">
                  &Eacute;lan
                </label>
                <input type="number" class="form-control" id="total-elan" value="8" min="1" />
              </div>
              <div class="form-group col-4">
                <label for="elf-fist-count">
                  Fists
                </label>
                <input type="number" class="form-control" id="elf-fist-count" value="2" min="1" />
              </div>
            </div>
            <div class="row">
              <div class="form-group col-12">
                <label for="effort-spent">
                  Effort to spend this round:
                  <span class="badge badge-pill badge-primary" id="effort-spent-selected">0</span>
                  <br />
                  <p class="text-muted">
                    (effort spent can't exceed current &eacute;lan)
                  </p>
                </label>
                <input type="range" class="form-control-range" id="effort-spent" aria-describedby="effort-spent-help" min="0" max="20" value="0" />
                <div>
                  <span class="badge badge-pill badge-secondary float-left">0</span>
                  <span class="badge badge-pill badge-secondary float-right" id="effort-spendable-max">20</span>
                </div>
              </div>
              <div class="col-12">

              </div>
            </div>

            <table class="table">
              <tr>
                <td>
                  Min effort for success:
                </td>
                <td>
                  <span id="effort-for-possible-success"></span>
                </td>
              </tr>
              <tr>
                <td>
                  Min effort for <em>likely</em> success:
                </td>
                <td>
                  <span id="effort-for-likely-success"></span>
                </td>
              </tr>
              <tr>
                <td>
                  Min effort for <em>guaranteed</em> success:
                </td>
                <td>
                  <span id="effort-to-guarantee-success"></span>
                </td>
              </tr>
            </table>

            <div class="form-group form-check">
              <input class="form-check-input" type="checkbox" value="1" id="elf-auto-reroll" />
              <label class="form-check-label" for="elf-auto-reroll">
                Automatically re-roll...
              </label>
              <div id="elf-reroll-options" class="reroll-options">
                <i class="fas fa-dice-one die" data-value="1" data-selected="0"></i>
                <i class="fas fa-dice-two die" data-value="2" data-selected="0"></i>
                <i class="fas fa-dice-three die" data-value="3" data-selected="0"></i>
                <i class="fas fa-dice-four die" data-value="4" data-selected="0"></i>
                <i class="fas fa-dice-five die" data-value="5" data-selected="0"></i>
                <i class="fas fa-dice-six die" data-value="6" data-selected="0"></i>
                <p class="form-text text-muted">
                  The selected dice will automatically be <span class="rerolled">re-rolled</span> once (doesn't stack with re-rolls due to being in
                  a multiple hassle)
                </p>
              </div>
            </div>

            <div id="items">
              <strong>
                Usable items
              </strong>
              <div class="row">
                <div class="form-group form-check col-6">
                  <input class="form-check-input" type="checkbox" value="1" id="item-cat" />
                  <label class="form-check-label" for="item-cat">
                    Familiar Cat
                  </label>
                </div>
                <div class="form-group form-check col-6">
                  <input class="form-check-input" type="checkbox" value="1" id="item-heroic-sword" />
                  <label class="form-check-label" for="item-heroic-sword">
                    Heroic Sword (equipped)
                  </label>
                </div>
              </div>
              <div class="row">
                <div class="form-group form-check col-6">
                  <input class="form-check-input" type="checkbox" value="1" id="item-ink" />
                  <label class="form-check-label" for="item-ink">
                    Ink Pouch
                  </label>
                </div>
                <div class="form-group form-check col-6">
                  <input class="form-check-input" type="checkbox" value="1" id="item-tail" />
                  <label class="form-check-label" for="item-tail">
                    Manticore Tail (equipped)
                  </label>
                </div>
              </div>
              <div class="row">
                <div class="form-group form-check col-6">
                  <input class="form-check-input" type="checkbox" value="1" id="item-troupe" />
                  <label class="form-check-label" for="item-troupe">
                    Dwarfen Troupe
                  </label>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section class="card col-md-6" id="hassle-section">
          <div class="card-body">
            <h2 class="card-title">
              The Hassle
            </h2>
            <div class="form-group form-check">
              <input type="checkbox" class="form-check-input" id="multiple-hassle" value="1" />
              <label class="form-check-label" for="multiple-hassle">
                This is a multiple hassle
              </label>
              <div class="form-text text-muted multiple-only" id="multiple-hassle-notes">
                Any of the Elf's dice that land on 4+ will be <span class="rerolled">re-rolled</span>,
                and losing may result in multiple <strong>consequences</strong>. Add hassles in the order you
                want to fight them.
                <div id="multiple-hassle-reroll-toggler">
                  <input type="checkbox" class="form-check-input" id="disable-multi-hassle-reroll" value="1" />
                  <label class="form-check-label" for="disable-multi-hassle-reroll">
                    I'm using the Familiar Cat or the Heroic Sword in this round
                  </label>
                </div>
              </div>
            </div>
            <div class="form-group form-check" id="is-musical-container">
              <input class="form-check-input" type="checkbox" value="1" id="is-musical" />
              <label class="form-check-label" for="is-musical">
                This is a musical hassle
              </label>
              <p class="form-text text-muted">
                Your Dwarfen Troupe will reroll <span class="troupe">a special die</span> if it lands on 5 or 6 and add
                the second value to your total.
              </p>
            </div>
            <div id="hassle-set">
              <div class="hassle" data-hassle-key="1">
                <div class="row">
                  <div class="form-group col-4">
                    <label for="hassle-1-difficulty">
                      Difficulty
                    </label>
                    <input type="number" class="form-control hassle-difficulty" id="hassle-1-difficulty" value="1" min="1" />
                  </div>
                  <div class="form-group col-4">
                    <label for="hassle-1-fist-count">
                      Fists
                    </label>
                    <input type="number" class="form-control hassle-fists" id="hassle-1-fist-count" value="0" min="0" />
                    <small class="form-text text-muted note">
                      Default: 0
                    </small>
                  </div>
                  <div class="form-group col-4">
                    <label for="hassle-1-toughness">Toughness</label>
                    <input type="number" class="form-control hassle-toughness" id="hassle-1-toughness" min="1" value="1" />
                    <small class="form-text text-muted note">
                      Default: 1
                    </small>
                  </div>
                </div>
                <div class="form-group row">
                  <label for="hassle-1-name" class="col-4 col-form-label text-right">
                    Hassle name
                  </label>
                  <div class="col-8">
                    <input type="text" class="form-control hassle-name" id="hassle-1-name" placeholder="Hassle #1" />
                    <small class="form-text text-muted note">
                      Optional
                    </small>
                  </div>
                </div>
              </div>
            </div>

            <button class="btn btn-sm btn-secondary left multiple-only" id="remove-hassle" type="button">
              Remove Hassle
            </button>

            <button class="btn btn-sm btn-secondary float-right multiple-only" id="add-hassle" type="button">
              Add Hassle
            </button>

            <div class="form-group form-check" id="hassle-auto-reroll-container">
              <input class="form-check-input" type="checkbox" value="1" id="hassle-auto-reroll" />
              <label class="form-check-label" for="hassle-auto-reroll">
                Automatically re-roll...
              </label>
              <div id="hassle-reroll-options" class="reroll-options">
                <i class="fas fa-dice-one die" data-value="1" data-selected="0"></i>
                <i class="fas fa-dice-two die" data-value="2" data-selected="0"></i>
                <i class="fas fa-dice-three die" data-value="3" data-selected="0"></i>
                <i class="fas fa-dice-four die" data-value="4" data-selected="0"></i>
                <i class="fas fa-dice-five die" data-value="5" data-selected="0"></i>
                <i class="fas fa-dice-six die" data-value="6" data-selected="0"></i>
                <p class="form-text text-muted">
                  The selected dice will automatically be <span class="rerolled">re-rolled</span> once
                </p>
              </div>
            </div>

          </div>
        </section>
      </div>

      <button type="submit" class="btn btn-primary btn-block" id="submit">
        Roll
      </button>
      <button type="reset" class="btn btn-secondary reset-btn btn-block">
        Reset
      </button>
    </form>
  </div>

  <div class="modal fade" id="modal">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">
            <span id="modal-round">Round 1</span> Results
          </h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body" id="modal-body">
          <div id="elf-dice-container" class="dice-container"></div>
          <div id="elf-roll-results"></div>
          <div id="hassle-dice-container" class="dice-container"></div>
          <div id="hassle-roll-results" class="dice-container"></div>
          <div id="roll-summary" class="roll-summary"></div>
        </div>
        <div class="modal-footer">
          <div class="form-group form-check" id="can-reroll-container">
            <input class="form-check-input" type="checkbox" value="1" id="can-reroll" />
            <label class="form-check-label" for="can-reroll">
              I can re-roll dice
            </label>
          </div>
          <button type="reset" class="btn btn-secondary reset-btn" data-dismiss="modal">
            Reset
          </button>
          <button type="button" class="btn btn-secondary" data-dismiss="modal" id="modal-close">
            Close
          </button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="algorithm-popup">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">
            Hassle Resolution Mechanics
          </h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <ol>
            <li>
              Add effort spent + highest single die roll of 1d6 per elf fist.
              <ul>
                <li>
                  If this is a multiple hassle, re-roll any die that scores 4 or higher once and keep the result.
                </li>
              </ul>
            </li>
            <li>
              Add hassle difficulty + highest single die roll of 1d6 per hassle fist.
            </li>
            <li>
              Compare totals.
              <ul>
                <li>
                  If the elf's total is greater, you win.
                  <ul>
                    <li>
                      If the hassle has remaining toughness, subtract 1 from its toughness and return to step 1,
                      advancing the round.
                    </li>
                    <li>
                      If there’s no remaining toughness, the hassle is defeated.
                    </li>
                  </ul>
                </li>
                <li>
                  If the elf's total is <em>not</em> greater, suffer consequences (if any), then return to step 1 and
                  try again in the next round.
                  <ul>
                    <li>
                      If this is a multiple hassle, you determine the scores of the other hassles and compare them to
                      the total you scored against the targeted hassle.
                    </li>
                    <li>
                      You then suffer the consequences for losing to each other hassle that your total is equal to or
                      lower than.
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
          </ol>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">
            Close
          </button>
        </div>
      </div>
    </div>
  </div>

  <footer class="container">
    <div class="row">
      <div class="col-md-2">
        <a href="https://twofistedfantasy.com/books/the-sword-of-the-bastard-elf/">
          <img src="img/coverimg.thumb.jpg" alt="The Sword of the Bastard Elf book cover" title="The Sword of the Bastard Elf" />
        </a>
      </div>
      <section class="col-md-5">
        <h3>About</h3>
        <p>
          This is a dice-roller for combat and other such hassles in the game
          <em>The Sword of the Bastard Elf</em>.
        </p>
        <button id="algorithm-button" class="btn btn-info">Mechanics Explanation</button>
      </section>
      <section class="col-md-5">
        <h3>Links</h3>
        <ul>
          <li>
            <a href="https://twofistedfantasy.com/books/the-sword-of-the-bastard-elf/">The Sword of the Bastard Elf</a>
          </li>
          <li>
            <a href="https://phantomwatson.com">PhantomWatson.com</a> (developer)
          </li>
          <li>
            <a href="https://github.com/PhantomWatson/bastard-elf-hassler">GitHub</a>
          </li>
        </ul>
      </section>
    </div>
  </footer>

  <script src="js/vendor/modernizr-3.11.2.min.js"></script>
  <script src="js/plugins.js"></script>
  <script src="js/main.js"></script>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-H4F0PTSWBJ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-H4F0PTSWBJ');
  </script>
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      new HassleResolver();
    });
  </script>
</body>

</html>
