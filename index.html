<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>Bastard Elf Hassler</title>
  <meta name="description" content="A dice-roller for combat and other such hassles in the game The Sword of the Bastard Elf.">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

  <meta property="og:title" content="Bastard Elf Hassler" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://bastard-elf-hassler.phantomwatson.com" />
  <meta property="og:description" content="A dice-roller for combat and other such hassles in the game The Sword of the Bastard Elf." />
  <meta property="og:image" content="/img/coverimg.jpg" />

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous" />
  <link rel="stylesheet" href="css/normalize.css" />
  <link rel="stylesheet" href="css/main.css" />
  <link rel="stylesheet" href="fontawesome-5.14.0/css/all.min.css" />
  <link rel="shortcut icon" href="favicon.ico" />

  <meta name="theme-color" content="#fafafa" />
</head>

<body>
  <nav class="navbar fixed-top navbar-light bg-light">
    <span class="navbar-brand">
      Bastard Elf Hassler
    </span>
    <span id="round-header">
      Round 1
    </span>
  </nav>
  <div class="container">
    <form id="form">
      <div class="row">
        <section class="card col-md-6">
          <div class="card-body">
            <h2 class="card-title">
              The Bastard Elf
            </h2>
            <div class="form-group form-check">
              <input class="form-check-input" type="checkbox" value="1" id="rather-win" checked="checked">
              <label class="form-check-label" for="rather-win">
                I'm trying to win this fight
              </label>
            </div>
            <div class="row">
              <div class="form-group col-4">
                <label for="total-effort">
                  Effort
                </label>
                <input type="number" class="form-control" id="total-effort" min="0" value="70" />
              </div>
              <div class="form-group col-4">
                <label for="total-elan">
                  &Eacute;lan
                </label>
                <input type="number" class="form-control" id="total-elan" value="8" min="1" />
              </div>
              <div class="form-group col-4">
                <label for="elf-fist-count">
                  Fists
                </label>
                <input type="number" class="form-control" id="elf-fist-count" value="2" min="1" />
              </div>
            </div>
            <div class="row">
              <div class="form-group col-12">
                <label for="effort-spent">
                  Effort to spend this round:
                  <span class="badge badge-pill badge-primary" id="effort-spent-selected">0</span>
                </label>
                <input type="range" class="form-control-range" id="effort-spent" aria-describedby="effort-spent-help" min="0" max="20" value="0" />
                <div>
                  <span class="badge badge-pill badge-secondary float-left">0</span>
                  <span class="badge badge-pill badge-secondary float-right" id="effort-spendable-max">20</span>
                </div>
              </div>
            </div>
            <small class="form-text text-muted">
              Effort spent can't exceed current &eacute;lan
            </small>
            <div id="former-elf-dice-container" class="dice-container"></div>
          </div>
        </section>

        <section class="card col-md-6" id="hassle-section">
          <div class="card-body">
            <h2 class="card-title">
              The Hassle
            </h2>
            <div class="form-group form-check">
              <input type="checkbox" class="form-check-input" id="multiple-hassle" value="1">
              <label class="form-check-label" for="multiple-hassle">
                This is a multiple hassle
              </label>
              <small class="form-text text-muted multiple-only" id="multiple-hassle-notes">
                Any of the Elf's dice that land on 4+ will be <span class="rerolled">re-rolled</span>,
                and losing may result in multiple <strong>consequences</strong>. Add hassles in the order you
                want to fight them.
              </small>
            </div>
            <div id="hassle-set">
              <div class="hassle" data-hassle-key="1">
                <div class="row">
                  <div class="form-group col-4">
                    <label for="hassle-1-difficulty">
                      Difficulty
                    </label>
                    <input type="number" class="form-control hassle-difficulty" id="hassle-1-difficulty" value="1" min="1" />
                  </div>
                  <div class="form-group col-4">
                    <label for="hassle-1-fist-count">
                      Fists
                    </label>
                    <input type="number" class="form-control hassle-fists" id="hassle-1-fist-count" value="0" min="0" />
                    <small class="form-text text-muted note">
                      Default: 0
                    </small>
                  </div>
                  <div class="form-group col-4">
                    <label for="hassle-1-toughness">Toughness</label>
                    <input type="number" class="form-control hassle-toughness" id="hassle-1-toughness" min="1" value="1" />
                    <small class="form-text text-muted note">
                      Default: 1
                    </small>
                  </div>
                </div>
                <div class="form-group row">
                  <label for="hassle-1-name" class="col-4 col-form-label text-right">
                    Hassle name
                  </label>
                  <div class="col-8">
                    <input type="text" class="form-control hassle-name" id="hassle-1-name" placeholder="Hassle #1" />
                    <small class="form-text text-muted note">
                      Optional
                    </small>
                  </div>
                </div>
              </div>
            </div>

            <button class="btn btn-sm btn-secondary left multiple-only" id="remove-hassle" type="button">
              Remove Hassle
            </button>

            <button class="btn btn-sm btn-secondary float-right multiple-only" id="add-hassle" type="button">
              Add Hassle
            </button>

            <div id="former-hassle-dice-container" class="dice-container"></div>
          </div>
        </section>
      </div>

      <button type="submit" class="btn btn-primary btn-block" id="submit">
        Roll
      </button>
      <button type="reset" class="btn btn-secondary reset-btn btn-block">
        Reset
      </button>
    </form>
  </div>

  <div class="modal fade" id="modal">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">
            <span id="modal-round">Round 1</span> Results
          </h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body" id="modal-body">
          <div id="elf-dice-container" class="dice-container"></div>
          <div id="elf-roll-results"></div>
          <div id="hassle-dice-container" class="dice-container"></div>
          <div id="hassle-roll-results" class="dice-container"></div>
          <div id="roll-summary" class="roll-summary"></div>
        </div>
        <div class="modal-footer">
          <button type="reset" class="btn btn-secondary reset-btn" data-dismiss="modal">
            Reset
          </button>
          <button type="button" class="btn btn-secondary" data-dismiss="modal" id="modal-close">
            Close
          </button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="algorithm-popup">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">
            Hassle Resolution Mechanics
          </h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <ol>
            <li>
              Add effort spent + highest single die roll of 1d6 per elf fist.
              <ul>
                <li>
                  If this is a multiple hassle, re-roll any die that scores 4 or higher once and keep the result.
                </li>
              </ul>
            </li>
            <li>
              Add hassle difficulty + highest single die roll of 1d6 per hassle fist.
            </li>
            <li>
              Compare totals.
              <ul>
                <li>
                  If the elf's total is greater, you win.
                  <ul>
                    <li>
                      If the hassle has remaining toughness, subtract 1 from its toughness and return to step 1,
                      advancing the round.
                    </li>
                    <li>
                      If thereâ€™s no remaining toughness, the hassle is defeated.
                    </li>
                  </ul>
                </li>
                <li>
                  If the elf's total is <em>not</em> greater, suffer consequences (if any), then return to step 1 and
                  try again in the next round.
                  <ul>
                    <li>
                      If this is a multiple hassle, you determine the scores of the other hassles and compare them to
                      the total you scored against the targeted hassle.
                    </li>
                    <li>
                      You then suffer the consequences for losing to each other hassle that your total is equal to or
                      lower than.
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
          </ol>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">
            Close
          </button>
        </div>
      </div>
    </div>
  </div>

  <footer class="container">
    <div class="row">
      <div class="col-md-2">
        <a href="https://twofistedfantasy.com/books/the-sword-of-the-bastard-elf/">
          <img src="img/coverimg.thumb.jpg" alt="The Sword of the Bastard Elf book cover" title="The Sword of the Bastard Elf" />
        </a>
      </div>
      <section class="col-md-5">
        <h3>About</h3>
        <p>
          This is a dice-roller for combat and other such hassles in the game
          <em>The Sword of the Bastard Elf</em>.
        </p>
        <button id="algorithm-button" class="btn btn-info">Mechanics Explanation</button>
      </section>
      <section class="col-md-5">
        <h3>Links</h3>
        <ul>
          <li>
            <a href="https://twofistedfantasy.com/books/the-sword-of-the-bastard-elf/">The Sword of the Bastard Elf</a>
          </li>
          <li>
            <a href="https://phantomwatson.com">PhantomWatson.com</a> (developer)
          </li>
          <li>
            <a href="https://github.com/PhantomWatson/bastard-elf-hassler">GitHub</a>
          </li>
        </ul>
      </section>
    </div>
  </footer>

  <script src="js/vendor/modernizr-3.11.2.min.js"></script>
  <script src="js/plugins.js"></script>
  <script src="js/main.js"></script>

  <!-- Google Analytics: change UA-XXXXX-Y to be your site's ID.
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-XXXXX-Y', 'auto'); ga('set', 'anonymizeIp', true); ga('set', 'transport', 'beacon'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async></script -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      new HassleResolver();
    });
  </script>
</body>

</html>
